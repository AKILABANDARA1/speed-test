<!DOCTYPE html>
<html>
<head>
    <title>üì° Choreo Ingress/Egress Speed Monitor</title>
    <script>
        async function fetchLogs() {
            const res = await fetch("/logs");
            const data = await res.json();
            const resultDiv = document.getElementById("results");
            resultDiv.innerHTML = "";

            if (data.length === 0) {
                resultDiv.innerHTML = "<p>No logs yet.</p>";
                return;
            }

            data.forEach(entry => {
                const logEntry = document.createElement("div");
                if (entry.error) {
                    logEntry.innerHTML = `<strong>${entry.timestamp}</strong> ‚ùå Error: ${entry.error}`;
                } else {
                    logEntry.innerHTML = `<strong>${entry.timestamp}</strong> üì• ${entry.download_mbps} Mbps | üì§ ${entry.upload_mbps} Mbps`;
                }
                resultDiv.appendChild(logEntry);
            });
        }

        async function clearLogs() {
            await fetch("/clear", { method: "POST" });
            fetchLogs();
        }

        setInterval(fetchLogs, 5000);  // auto-refresh logs
        window.onload = fetchLogs;
    </script>
</head>
<body>
    <h1>üì° Choreo Ingress/Egress Speed Monitor</h1>
    <button onclick="clearLogs()">üßπ Clear Logs</button>
    <div id="results" style="margin-top: 20px;"></div>
</body>
</html>
